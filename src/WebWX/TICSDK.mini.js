!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.TICSDK=e():t.TICSDK=e()}(this,function(){return function(t){var e={};function n(i){if(e[i])return e[i].exports;var o=e[i]={i:i,l:!1,exports:{}};return t[i].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=t,n.c=e,n.i=function(t){return t},n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:i})},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=37)}([function(t,e,n){"use strict";var i=n(14),o=n(40),r=Object.prototype.toString;function s(t){return"[object Array]"===r.call(t)}function a(t){return null!==t&&"object"==typeof t}function c(t){return"[object Function]"===r.call(t)}function u(t,e){if(null!==t&&void 0!==t)if("object"!=typeof t&&(t=[t]),s(t))for(var n=0,i=t.length;n<i;n++)e.call(null,t[n],n,t);else for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&e.call(null,t[o],o,t)}t.exports={isArray:s,isArrayBuffer:function(t){return"[object ArrayBuffer]"===r.call(t)},isBuffer:o,isFormData:function(t){return"undefined"!=typeof FormData&&t instanceof FormData},isArrayBufferView:function(t){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(t):t&&t.buffer&&t.buffer instanceof ArrayBuffer},isString:function(t){return"string"==typeof t},isNumber:function(t){return"number"==typeof t},isObject:a,isUndefined:function(t){return void 0===t},isDate:function(t){return"[object Date]"===r.call(t)},isFile:function(t){return"[object File]"===r.call(t)},isBlob:function(t){return"[object Blob]"===r.call(t)},isFunction:c,isStream:function(t){return a(t)&&c(t.pipe)},isURLSearchParams:function(t){return"undefined"!=typeof URLSearchParams&&t instanceof URLSearchParams},isStandardBrowserEnv:function(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product)&&"undefined"!=typeof window&&"undefined"!=typeof document},forEach:u,merge:function t(){var e={};function n(n,i){"object"==typeof e[i]&&"object"==typeof n?e[i]=t(e[i],n):e[i]=n}for(var i=0,o=arguments.length;i<o;i++)u(arguments[i],n);return e},extend:function(t,e,n){return u(e,function(e,o){t[o]=n&&"function"==typeof e?i(e,n):e}),t},trim:function(t){return t.replace(/^\s*/,"").replace(/\s*$/,"")}}},function(t,e,n){"use strict";n(3),n(2);function i(){this.init()}i.prototype={init:function(){this.debug=!1,this.VERSION="1.3.1",this.initAuthData(),this.initClassData(),this.initBoardData(),this.initWebRTCData(),this.initCosData(),this.initRecordData()},setDebug:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.debug=t},initClassData:function(){this.classRoomData={roomType:"Public"}},initAuthData:function(){this.authData={sdkAppId:"",identifier:"",identifierNick:"",userHeadImg:null,userSig:"",accountType:1}},initWebRTCData:function(){this.webRTCData={closeLocalMedia:!0,audio:!0,video:!0,role:null,privateMapKey:null,useCloud:!0,pureAudioPushMod:0,recordId:null,peerAddNotify:!1}},initBoardData:function(){this.boardData={id:"",canDraw:!1,color:4278255871}},initCosData:function(){this.cosData={appid:"",bucket:"",region:"ap-shanghai",sign:"",url:"",path:"/TIC/WEB/"}},initRecordData:function(){this.recordData={autoRecord:!0}},setAuthData:function(t){Object.assign(this.authData,t)},setClassRoomData:function(t){Object.assign(this.classRoomData,t)},setCosData:function(t){Object.assign(this.cosData,t)},setWebRTCData:function(t){Object.assign(this.webRTCData,t)},setBoardData:function(t){Object.assign(this.boardData,t)},updateRoomID:function(t){this.classRoomData.roomID=t},setRecordData:function(t){Object.assign(this.recordData,t)},resetData:function(){this.initClassData(),this.initBoardData(),this.initWebRTCData(),this.initCosData()}},t.exports=new i},function(t,e,n){"use strict";t.exports={EVENT:{TIC:{ROOMID_NOT_FOUND:String(-3e3),ROOMID_NOT_MATCH:String(-3001),CREATE_CLASS_ROOM_ERROR:String(-3002),JOIN_CLASS_ROOM_ERROR:String(-3003),QUIT_CLASS_ROOM_ERROR:String(-3004),DESTROY_CLASS_ROOM_ERROR:String(-3005),TIMESTAMP_ERROR:String(-3006),CREATE_CLASS_ROOM_SUCC:String(3e3),JOIN_CLASS_ROOM_SUCC:String(3001),QUIT_CLASS_ROOM_SUCC:String(3002),DESTROY_CLASS_ROOM_SUCC:String(3003)},WEBRTC:{ERROR_NOTIFY:String(-1001),INIT_ERROR:String(-1e3),INIT_SUCC:String(1e3),LOCAL_STREAM_ADD:String(1001),REMOTE_STREAM_UPDATE:String(1002),REMOTE_STREAM_REMOVE:String(1003),WEBSOCKET_CLOSE:String(1004),RELAY_TIME_OUT:String(1005),KICK_OUT:String(1006),PEER_CONNECTION_ADD:String(1007),WEBSOCKET_NOTIFY:String(1008),STREAM_NOTIFY:String(1009)},IM:{LOGIN_ERROR:String(-2e3),JOIN_CHATROOM_FAIL:String(-2001),LOGOUT_ERROR:String(-2003),GROUP_IS_ALREADY_USED_ERROR:String(-2004),LOGIN_SUCC:String(2e3),CONNECTION_EVENT:String(2001),BIG_GROUP_MSG_NOTIFY:String(2002),MSG_NOTIFY:String(2003),GROUP_SYSTEM_NOTIFYS:String(2004),GROUP_INFO_CHANGE_NOTIFY:String(2005),JOIN_CHATROOM_SUCC:String(2006),LOGOUT_SUCC:String(2008),RECEIVE_BOARD_ROOM_MSG:String(2009),RECEIVE_CHAT_ROOM_MSG:String(2010),RECEIVE_C2C_MSG:String(2011),SEND_CHAT_MSG_ERROR:String(2012),SEND_CHAT_MSG_EMPTY_RECEIVE_ERROR:String(2013),SEND_CHAT_MSG_EMPTY_MSG_ERROR:String(2014),SEND_CHAT_MAX_LENGTH_MSG_ERROR:String(2015),KICKED:String(2016),FRIEND_SYSTEM_NOTIFYS:String(2017),PROFILE_SYSTEM_NOTIFYS:String(2018),C2C_EVENT_NOTIFYS:String(2019)},BOARD:{VERIFY_SDK_ERROR:String(-4e3),REAL_TIME_DATA:String(4001),ADD_BOARD:String(4002),DELETE_BOARD:String(4003),SWITCH_BOARD:String(4004),ADD_GROUP:String(4005),DELETE_GROUP:String(4006),SWITCH_GROUP:String(4007),ADD_DATA_ERROR:String(4008),IMG_START_LOAD:String(4009),IMG_LOAD:String(4010),IMG_ERROR:String(4011),IMG_ABORT:String(4012),HISTROY_DATA_COMPLETE:String(4013),VERIFY_SDK_SUCC:String(4014),CANVAS_MOUSEDOWN:String(4015),CANVAS_MOUSEMOVE:String(4016),CANVAS_MOUSEUP:String(4017),CANVAS_MOUSELEAVE:String(4018)},COS:{GET_SIGN_ERROR:String(-5e3),DOES_NOT_SUPPORT_UPLOAD:String(-5001),UPLOAD_ERROR:String(-5002),TASK_READY:String(5e3),HASH_PROGRESS:String(5001),PROGRESS:String(5002),GET_SIGN_SUCCESS:String(5003),UPLOAD_SUCCESS:String(5004)}}}},function(t,e,n){"use strict";function i(){}i.prototype.on=function(t,e){return t||console.error("监听的事件名有空"),this._cbs=this._cbs||{},(this._cbs[t]||(this._cbs[t]=[])).unshift(e),this},i.prototype.off=function(t,e){if(this._cbs=this._cbs||{},!t)return this._cbs={};if(!e)return delete this._cbs[t];for(var n,i=this._cbs[t]||[];i&&~(n=i.indexOf(e));)i.splice(n,1);return this},i.prototype.fire=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this,e=arguments[1],n=arguments[2];!e&&console.error("触发的事件名有空"),this._cbs=this._cbs||{};var i=this._cbs[e];if(i)for(var o=i.length;o--;)i[o].apply(t,[n]);return this},t.exports=new i},function(t,e,n){"use strict";var i=n(6),o=n(1);function r(){}r.prototype={APIURL:"https://ilivelog.qcloud.com",method:"POST",events:{},levels:{info:"info",warn:"warn",error:"error"},send:function(t){try{t.userAgent=navigator.userAgent,t.userid=o.authData.identifier,t.roomid=o.classRoomData.roomID,t.sdkappid=o.authData.sdkAppId,t=this.fillDatas(t);var e=this.getXHR();e.onreadystatechange=this.reporterHandel(this),e.open(this.method,this.APIURL,!0),e.setRequestHeader("Content-type","application/x-www-form-urlencoded"),e.send(JSON.stringify(t))}catch(t){console.log(t)}},fillDatas:function(t){var e={};for(var n in this.defDatas)e[n]=void 0!==t[n]?t[n]:this.defDatas[n];return e},datasParseToString:function(t){var e=[];for(var n in t)e.push(n+"="+encodeURIComponent(t[n]));return e.join("&")},getXHR:function(){var t=null;if(window.XMLHttpRequest)t=new XMLHttpRequest;else if(window.ActiveXObject)try{t=new ActiveXObject("Msxml2.XMLHTTP")}catch(e){try{t=new ActiveXObject("Microsoft.XMLHTTP")}catch(t){}}if(null!=t)return t;console.log("Your browser does not support XMLHTTP.")},reporterHandel:function(){return function(t){t&&t.readyState&&t.readyState}},defDatas:{action:"",version:o.VERSION,action_result:0,action_info:"",userid:"",time_consume:0,sdkappid:"",device:"web",log_time:0,business:"ticsdk",roomid:"",boardid:"",image_url:"",boardid_list:[],to_boardId:"",color:null,file_id:"",file_title:"",isfinish:0,msgLength:20,bucket:"",cos_appid:null,region:null,extra_info:"",userAgent:null},initSdk:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.send(Object.assign(n,{action:"initsdk",action_result:t,time_consume:e,log_time:i.getSecondTime()}))},imLogin:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.send(Object.assign(n,{action:"imlogin",action_result:t,time_consume:e,log_time:i.getSecondTime()}))},imLogout:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.send(Object.assign(n,{action:"imlogout",action_result:t,time_consume:e,log_time:i.getSecondTime()}))},createClassroom:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.send(Object.assign(n,{action:"create_classroom",action_result:t,time_consume:e,log_time:i.getSecondTime()}))},joinClassroom:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.send(Object.assign(n,{action:"join_classroom",action_result:t,time_consume:e,log_time:i.getSecondTime()}))},initRTC:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.send(Object.assign(n,{action:"init_rtc",action_result:t,time_consume:e,log_time:i.getSecondTime()}))},startRTC:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.send(Object.assign(n,{action:"start_rtc",action_result:t,time_consume:e,log_time:i.getSecondTime()}))},openCamera:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.send(Object.assign(n,{action:"open_camera",action_result:t,time_consume:e,log_time:i.getSecondTime()}))},closeCamera:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.send(Object.assign(n,{action:"close_camera",action_result:t,time_consume:e,log_time:i.getSecondTime()}))},switchCamera:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.send(Object.assign(n,{action:"switch_camera",action_result:t,time_consume:e,log_time:i.getSecondTime()}))},openMic:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.send(Object.assign(n,{action:"open_mic",action_result:t,time_consume:e,log_time:i.getSecondTime()}))},closeMic:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.send(Object.assign(n,{action:"close_mic",action_result:t,time_consume:e,log_time:i.getSecondTime()}))},switchMic:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.send(Object.assign(n,{action:"switch_mic",action_result:t,time_consume:e,log_time:i.getSecondTime()}))},exitClassroom:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.send(Object.assign(n,{action:"exit_classroom",action_result:t,time_consume:e,log_time:i.getSecondTime()}))},destroyClassroom:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.send(Object.assign(n,{action:"destroy_classroom",action_result:t,time_consume:e,log_time:i.getSecondTime()}))},cosUploadFile:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.send(Object.assign(n,{action:"cos_upload_file",action_result:t,time_consume:e,log_time:i.getSecondTime()}))},getFileTotalPage:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.send(Object.assign(n,{action:"get_file_total_page",action_result:t,time_consume:e,log_time:i.getSecondTime()}))},reportWebRTCLog:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.send(Object.assign(n,{action:t,action_result:e,log_time:i.getSecondTime()}))}},t.exports=new r},function(t,e,n){"use strict";(function(e){var i=n(0),o=n(34),r={"Content-Type":"application/x-www-form-urlencoded"};function s(t,e){!i.isUndefined(t)&&i.isUndefined(t["Content-Type"])&&(t["Content-Type"]=e)}var a,c={adapter:("undefined"!=typeof XMLHttpRequest?a=n(10):void 0!==e&&(a=n(10)),a),transformRequest:[function(t,e){return o(e,"Content-Type"),i.isFormData(t)||i.isArrayBuffer(t)||i.isBuffer(t)||i.isStream(t)||i.isFile(t)||i.isBlob(t)?t:i.isArrayBufferView(t)?t.buffer:i.isURLSearchParams(t)?(s(e,"application/x-www-form-urlencoded;charset=utf-8"),t.toString()):i.isObject(t)?(s(e,"application/json;charset=utf-8"),JSON.stringify(t)):t}],transformResponse:[function(t){if("string"==typeof t)try{t=JSON.parse(t)}catch(t){}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,validateStatus:function(t){return t>=200&&t<300}};c.headers={common:{Accept:"application/json, text/plain, */*"}},i.forEach(["delete","get","head"],function(t){c.headers[t]={}}),i.forEach(["post","put","patch"],function(t){c.headers[t]=i.merge(r)}),t.exports=c}).call(e,n(16))},function(t,e,n){"use strict";t.exports={hexToRgba:function(t){var e=[];return t.replace(/../g,function(t){e.push(parseInt(t,16))}),"rgba("+e.join(",")+",1)"},rgbaToHex:function(t){for(var e=t.toString().match(/\d+/g),n="",i=0;i<3;i++)n+=("0"+Number(e[i]).toString(16)).slice(-2);return n},dealColor:function(t){if(t<0)return"rgba("+(t>>24&255)+","+(t>>16&255)+","+(t>>8&255)+",1)";var e=parseInt(t).toString(16);return e=(e="000000"+(e=e.substr(0,e.length-2))).substring(e.length-6,e.length),this.hexToRgba(e)},formatColor:function(t){var e=this.rgbaToHex(t);return parseInt(e+"ff",16)},getTimeStamp:function(){return(new Date).getTime()},getSecondTime:function(){return parseInt(this.getTimeStamp()/1e3)},getAVSdkTimestamp:function(){return parseInt(4294967295&Date.now(),10)}}},function(t,e,n){"use strict";var i=n(1);t.exports={paint:null,getInstance:function(){return this.paint},renderView:function(){var t=i.boardData;return this.paint=null,this.paint=new BoardSDK(Object.assign({},t,{debug:i.debug,conf_id:i.classRoomData.roomID,user:i.authData.identifierNick||i.authData.identifier,tlsData:{sdkAppId:i.authData.sdkAppId,identifier:i.authData.identifier+"",userSig:i.authData.userSig}})),this.paint},quit:function(){this.paint&&(this.paint&&this.paint.off(),this.paint=null)},clearAll:function(){this.paint&&this.paint&&this.paint.clearAll()}}},function(t,e,n){"use strict";var i=n(39),o=n(1),r=n(3),s=n(15),a=n(2),c=n(4);t.exports={login:function(){return new Promise(function(t,e){var n=o.authData;webim.login({sdkAppID:n.sdkAppId,appIDAt3rd:n.sdkAppId,accountType:n.accountType||1,identifier:n.identifier,identifierNick:n.identifierNick||n.identifier,userSig:n.userSig},i,{isAccessFormalEnv:!0,isLogOn:!1},t,e)})},logout:function(){return new Promise(function(t,e){webim.logout(t,e)})},setProfilePortrait:function(){var t=o.authData,e=[{Tag:"Tag_Profile_IM_Nick",Value:t.identifierNick||t.identifier}];t.userHeadImg&&e.push({Tag:"Tag_Profile_IM_Image",Value:t.userHeadImg});var n={ProfileItem:e};webim.setProfilePortrait(n,function(t){},function(t){})},createRoom:function(){var t=o.classRoomData.roomID+"",e=o.classRoomData.roomType||"Public",n={GroupId:t,Owner_Account:String(o.authData.identifier),Type:e,ApplyJoinOption:"FreeAccess",Name:t,Notification:"",Introduction:"",MemberList:[]};return new Promise(function(t,e){var i=Date.now();webim.createGroup(n,function(e){t(e)},function(n){10025==n.ErrorCode?t(n):10021==n.ErrorCode?(c.createClassroom(n.ErrorCode,(new Date).getTime()-i,{action_info:n.ErrorInfo}),r.fire(this,a.EVENT.IM.GROUP_IS_ALREADY_USED_ERROR,n)):e(n)})})},joinRoom:function(){return new Promise(function(t,e){var n=o.classRoomData.roomID+"";webim.applyJoinGroup({GroupId:n},function(i){i.JoinedStatus&&"JoinedSuccess"==i.JoinedStatus?(s.chatSess=new webim.Session(webim.SESSION_TYPE.GROUP,n,n),t(i)):e(i)},function(i){10013==i.ErrorCode?(s.chatSess=new webim.Session(webim.SESSION_TYPE.GROUP,n,n),t(i)):e(i)})})},destroyGroup:function(){var t=o.classRoomData.roomID+"";return"AvChatRoom"===(o.classRoomData.roomType||"Public")?this.quitBigGroup():new Promise(function(e,n){console.log(t),webim.destroyGroup({GroupId:t},function(t){e(t)},function(t){n(t)})})},quitGroup:function(){var t=o.classRoomData.roomID+"";return"AvChatRoom"===(o.classRoomData.roomType||"Public")?this.quitBigGroup():new Promise(function(e,n){webim.quitGroup({GroupId:t},function(t){e(t)},function(t){10009!=t.ErrorCode?n(t):e()})})},quitBigGroup:function(){var t=o.classRoomData.roomID+"";return new Promise(function(e,n){webim.quitBigGroup({GroupId:t},function(t){e(t)},function(t){n(t)})})},sendC2CTextMessage:function(t,e){s.sendTextMessage(webim.SESSION_TYPE.C2C,e,t)},sendC2CCustomMessage:function(t,e){s.sendCustomMsg(webim.SESSION_TYPE.C2C,e,t)},sendGroupTextMessage:function(t){s.sendTextMessage(webim.SESSION_TYPE.GROUP,t)},sendGroupCustomMessage:function(t){s.sendCustomMsg(webim.SESSION_TYPE.GROUP,t)},sendBoardGroupCustomMessage:function(t){s.sendBoardGroupCustomMessage(JSON.stringify(t))}}},function(t,e,n){t.exports=n(20)},function(t,e,n){"use strict";(function(e){var i=n(0),o=n(26),r=n(29),s=n(35),a=n(33),c=n(13),u="undefined"!=typeof window&&window.btoa&&window.btoa.bind(window)||n(28);t.exports=function(t){return new Promise(function(f,d){var E=t.data,_=t.headers;i.isFormData(E)&&delete _["Content-Type"];var l=new XMLHttpRequest,g="onreadystatechange",T=!1;if("test"===e.env.NODE_ENV||"undefined"==typeof window||!window.XDomainRequest||"withCredentials"in l||a(t.url)||(l=new window.XDomainRequest,g="onload",T=!0,l.onprogress=function(){},l.ontimeout=function(){}),t.auth){var S=t.auth.username||"",h=t.auth.password||"";_.Authorization="Basic "+u(S+":"+h)}if(l.open(t.method.toUpperCase(),r(t.url,t.params,t.paramsSerializer),!0),l.timeout=t.timeout,l[g]=function(){if(l&&(4===l.readyState||T)&&(0!==l.status||l.responseURL&&0===l.responseURL.indexOf("file:"))){var e="getAllResponseHeaders"in l?s(l.getAllResponseHeaders()):null,n={data:t.responseType&&"text"!==t.responseType?l.response:l.responseText,status:1223===l.status?204:l.status,statusText:1223===l.status?"No Content":l.statusText,headers:e,config:t,request:l};o(f,d,n),l=null}},l.onerror=function(){d(c("Network Error",t,null,l)),l=null},l.ontimeout=function(){d(c("timeout of "+t.timeout+"ms exceeded",t,"ECONNABORTED",l)),l=null},i.isStandardBrowserEnv()){var p=n(31),m=(t.withCredentials||a(t.url))&&t.xsrfCookieName?p.read(t.xsrfCookieName):void 0;m&&(_[t.xsrfHeaderName]=m)}if("setRequestHeader"in l&&i.forEach(_,function(t,e){void 0===E&&"content-type"===e.toLowerCase()?delete _[e]:l.setRequestHeader(e,t)}),t.withCredentials&&(l.withCredentials=!0),t.responseType)try{l.responseType=t.responseType}catch(e){if("json"!==t.responseType)throw e}"function"==typeof t.onDownloadProgress&&l.addEventListener("progress",t.onDownloadProgress),"function"==typeof t.onUploadProgress&&l.upload&&l.upload.addEventListener("progress",t.onUploadProgress),t.cancelToken&&t.cancelToken.promise.then(function(t){l&&(l.abort(),d(t),l=null)}),void 0===E&&(E=null),l.send(E)})}}).call(e,n(16))},function(t,e,n){"use strict";function i(t){this.message=t}i.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},i.prototype.__CANCEL__=!0,t.exports=i},function(t,e,n){"use strict";t.exports=function(t){return!(!t||!t.__CANCEL__)}},function(t,e,n){"use strict";var i=n(25);t.exports=function(t,e,n,o,r){var s=new Error(t);return i(s,e,n,o,r)}},function(t,e,n){"use strict";t.exports=function(t,e){return function(){for(var n=new Array(arguments.length),i=0;i<n.length;i++)n[i]=arguments[i];return t.apply(e,n)}}},function(t,e,n){"use strict";var i=n(1),o=n(3),r=n(2);t.exports={boardselSess:null,chatSess:null,sendBoardGroupCustomMessage:function(t){var e=new webim.Msg(this.chatSess,!0,-1,Math.round(4294967296*Math.random()),(new Date).getTime(),i.authData.identifier,webim.GROUP_MSG_SUB_TYPE.COMMON,i.authData.identifierNick),n=new webim.Msg.Elem.Custom(t,"","TXWhiteBoardExt");e.addCustom(n),e.PushInfoBoolean=!0,e.PushInfo={Ext:"TXWhiteBoardExt",PushFlag:0},webim.sendMsg(e,function(t){console.log(t)})},sendTextMessage:function(t,e,n){var s;if(t==webim.SESSION_TYPE.C2C){if(!n)return void o.fire(this,r.EVENT.IM.SEND_CHAT_MSG_EMPTY_RECEIVE_ERROR,e);s=webim.MSG_MAX_LENGTH.C2C,"消息长度超出限制(最多"+Math.round(s/3)+"汉字)"}else s=webim.MSG_MAX_LENGTH.GROUP,"消息长度超出限制(最多"+Math.round(s/3)+"汉字)";if(e.length<1)o.fire(this,r.EVENT.IM.SEND_CHAT_MSG_EMPTY_MSG_ERROR,e);else if(webim.Tool.getStrBytes(e)>s)o.fire(this,r.EVENT.IM.SEND_CHAT_MAX_LENGTH_MSG_ERROR,e);else{var a,c=null;t==webim.SESSION_TYPE.GROUP?(c=this.chatSess,a=webim.GROUP_MSG_SUB_TYPE.COMMON):(a=webim.C2C_MSG_SUB_TYPE.COMMON,c=new webim.Session(t,n,n,"",this.getUnixTimestamp()));var u,f,d,E,_,l=Math.round(4294967296*Math.random()),g=this.getUnixTimestamp(),T=new webim.Msg(c,!0,-1,l,g,i.authData.identifier,a,i.authData.identifierNick),S=e.match(/\[[^[\]]{1,3}\]/gm);if(!S||S.length<1)u=new webim.Msg.Elem.Text(e),T.addText(u);else{for(var h=0;h<S.length;h++)(d=e.substring(0,e.indexOf(S[h])))&&(u=new webim.Msg.Elem.Text(d),T.addText(u)),E=webim.EmotionDataIndexs[S[h]],webim.Emotions[E]?(f=new webim.Msg.Elem.Face(E,S[h]),T.addFace(f)):(u=new webim.Msg.Elem.Text(S[h]),T.addText(u)),_=e.indexOf(S[h])+S[h].length,e=e.substring(_);e&&(u=new webim.Msg.Elem.Text(e),T.addText(u))}webim.sendMsg(T,function(e){t==webim.SESSION_TYPE.C2C&&o.fire(this,r.EVENT.IM.RECEIVE_C2C_MSG,T)},function(t){o.fire(this,r.EVENT.IM.SEND_CHAT_MSG_ERROR,t)})}},sendCustomMsg:function(t,e,n){var s;if(t==webim.SESSION_TYPE.C2C){if(!n)return void o.fire(this,r.EVENT.IM.SEND_CHAT_MSG_EMPTY_RECEIVE_ERROR,JSON.stringify(e));s=webim.MSG_MAX_LENGTH.C2C,"消息长度超出限制(最多"+Math.round(s/3)+"汉字)"}else s=webim.MSG_MAX_LENGTH.GROUP,"消息长度超出限制(最多"+Math.round(s/3)+"汉字)";var a=e.data,c=e.desc,u=e.ext,f=webim.Tool.getStrBytes(a);if(a.length<1)o.fire(this,r.EVENT.IM.SEND_CHAT_MSG_EMPTY_MSG_ERROR,JSON.stringify(e));else if(f>s)o.fire(this,r.EVENT.IM.SEND_CHAT_MAX_LENGTH_MSG_ERROR,JSON.stringify(e));else{var d,E=null;t==webim.SESSION_TYPE.GROUP?(E=this.chatSess,d=webim.GROUP_MSG_SUB_TYPE.COMMON):(E=new webim.Session(t,n,n,"",this.getUnixTimestamp()),d=webim.C2C_MSG_SUB_TYPE.COMMON);var _=Math.round(4294967296*Math.random()),l=this.getUnixTimestamp(),g=new webim.Msg(E,!0,-1,_,l,i.authData.identifier,d,i.authData.identifierNick),T=new webim.Msg.Elem.Custom(a,c,u);g.addCustom(T),webim.sendMsg(g,function(e){t==webim.SESSION_TYPE.C2C&&o.fire(this,r.EVENT.IM.RECEIVE_C2C_MSG,g)},function(t){o.fire(this,r.EVENT.IM.SEND_CHAT_MSG_ERROR,t)})}},getUnixTimestamp:function(){return Math.round((new Date).getTime()/1e3)}}},function(t,e){var n,i,o=t.exports={};function r(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function a(t){if(n===setTimeout)return setTimeout(t,0);if((n===r||!n)&&setTimeout)return n=setTimeout,setTimeout(t,0);try{return n(t,0)}catch(e){try{return n.call(null,t,0)}catch(e){return n.call(this,t,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:r}catch(t){n=r}try{i="function"==typeof clearTimeout?clearTimeout:s}catch(t){i=s}}();var c,u=[],f=!1,d=-1;function E(){f&&c&&(f=!1,c.length?u=c.concat(u):d=-1,u.length&&_())}function _(){if(!f){var t=a(E);f=!0;for(var e=u.length;e;){for(c=u,u=[];++d<e;)c&&c[d].run();d=-1,e=u.length}c=null,f=!1,function(t){if(i===clearTimeout)return clearTimeout(t);if((i===s||!i)&&clearTimeout)return i=clearTimeout,clearTimeout(t);try{i(t)}catch(e){try{return i.call(null,t)}catch(e){return i.call(this,t)}}}(t)}}function l(t,e){this.fun=t,this.array=e}function g(){}o.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];u.push(new l(t,e)),1!==u.length||f||a(_)},l.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=g,o.addListener=g,o.once=g,o.off=g,o.removeListener=g,o.removeAllListeners=g,o.emit=g,o.prependListener=g,o.prependOnceListener=g,o.listeners=function(t){return[]},o.binding=function(t){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(t){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},function(t,e,n){"use strict";var i=n(9),o=n(1),r=n(38);function s(){this.url=null,window.axios=i}s.prototype={applyClassRoom:function(t){return this.url=r.getTICSDKSvrURL(o.authData),i.post(this.url,{cmd:"apply_classroom_id"})},getDocTotalPage:function(t){return i.get(t)},getCosAuthData:function(){var t=r.getWhiteboardSvrURL(o.authData);return i.post(t,{cmd:"open_conf_svc",sub_cmd:"get_cos_token",duration:300,conf_id:1*o.classRoomData.roomID})}},t.exports=new s},function(t,e,n){"use strict";var i=n(7),o=(n(15),n(8)),r=n(3),s=n(2),a=n(1),c=n(9);t.exports={initEvent:function(){var t=this,e=i.getInstance();e.on("real_time_data",function(e){o.sendBoardGroupCustomMessage(e),r.fire(t,s.EVENT.BOARD.REAL_TIME_DATA,e)}),r.on(s.EVENT.IM.RECEIVE_BOARD_ROOM_MSG,function(e){t.reviceBoardRoomMsg(e)}),e.on("add_board",function(e){r.fire(t,s.EVENT.BOARD.ADD_BOARD,e)}),e.on("delete_board",function(e){r.fire(t,s.EVENT.BOARD.DELETE_BOARD,e)}),e.on("switch_board",function(e){r.fire(t,s.EVENT.BOARD.SWITCH_BOARD,e)}),e.on("add_group",function(e){r.fire(t,s.EVENT.BOARD.ADD_GROUP,e)}),e.on("delete_group",function(e){r.fire(t,s.EVENT.BOARD.DELETE_GROUP,e)}),e.on("switch_group",function(e){r.fire(t,s.EVENT.BOARD.SWITCH_GROUP,e)}),e.on("img_start_load",function(e){r.fire(t,s.EVENT.BOARD.IMG_START_LOAD,e)}),e.on("img_load",function(e){r.fire(t,s.EVENT.BOARD.IMG_LOAD,e)}),e.on("img_error",function(e){r.fire(t,s.EVENT.BOARD.IMG_ERROR,e)}),e.on("img_abort",function(e){r.fire(t,s.EVENT.BOARD.IMG_ABORT,e)}),e.on("histroy_data_complete",function(e){r.fire(t,s.EVENT.BOARD.HISTROY_DATA_COMPLETE,e)}),e.on("get_sign_error",function(e){r.fire(t,s.EVENT.COS.GET_SIGN_ERROR,e)}),e.on("does_not_support_upload",function(e){r.fire(t,s.EVENT.COS.DOES_NOT_SUPPORT_UPLOAD,e)}),e.on("upload_error",function(e){r.fire(t,s.EVENT.COS.UPLOAD_ERROR,e)}),e.on("task_ready",function(e){r.fire(t,s.EVENT.COS.TASK_READY,e)}),e.on("hash_progress",function(e){r.fire(t,s.EVENT.COS.HASH_PROGRESS,e)}),e.on("progress",function(e){r.fire(t,s.EVENT.COS.PROGRESS,e)}),e.on("get_sign_success",function(e){r.fire(t,s.EVENT.COS.GET_SIGN_SUCCESS,e)}),e.on("upload_success",function(e){r.fire(t,s.EVENT.COS.UPLOAD_SUCCESS,e)}),e.on("verify_sdk_succ",function(){r.fire(t,s.EVENT.BOARD.VERIFY_SDK_SUCC)}),e.on("verify_sdk_error",function(){r.fire(t,s.EVENT.BOARD.VERIFY_SDK_ERROR)}),e.on("canvas_mousedown",function(){r.fire(t,s.EVENT.BOARD.CANVAS_MOUSEDOWN)}),e.on("CANVAS_MOUSEMOVE",function(){r.fire(t,s.EVENT.BOARD.CANVAS_MOUSEMOVE)}),e.on("CANVAS_MOUSEUP",function(){r.fire(t,s.EVENT.BOARD.CANVAS_MOUSEUP)}),e.on("CANVAS_MOUSELEAVE",function(){r.fire(t,s.EVENT.BOARD.CANVAS_MOUSELEAVE)})},reviceBoardRoomMsg:function(t){var e=this;t.elems.forEach(function(n){if("TIMCustomElem"===n.type&&"TXWhiteBoardExt"===n.content.ext&&t.getFromAccount()!=a.authData.identifier)try{i.getInstance().addData(JSON.parse(n.content.data))}catch(t){r.fire(e,s.EVENT.BOARD.ADD_DATA_ERROR,t)}else"TIMFileElem"===n.type&&"TXWhiteBoardExt"===n.content.name&&c.get(n.content.downUrl).then(function(t){try{i.getInstance().addData(t&&t.data)}catch(t){r.fire(this,s.EVENT.BOARD.ADD_DATA_ERROR,t)}})})}}},function(t,e,n){"use strict";var i=n(3),o=n(1),r=n(2),s=n(4);t.exports={RTC:null,getInstance:function(){return this.RTC},quit:function(){this.RTC.quit()},joinAvRoom:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){};if("undefined"!=typeof WebRTCAPI){var a=o.authData,c=o.webRTCData;this.RTC=null;var u=(new Date).getTime();return this.RTC=new WebRTCAPI({userId:a.identifier,userSig:a.userSig,sdkAppId:a.sdkAppId,accountType:a.accountType||1,closeLocalMedia:c.closeLocalMedia,audio:c.audio,video:c.video,useCloud:c.useCloud,peerAddNotify:c.peerAddNotify},function(a){i.fire(t,r.EVENT.WEBRTC.INIT_SUCC,a),t.RTC.enterRoom({roomid:1*o.classRoomData.roomID,privateMapKey:o.webRTCData.privateMapKey,role:o.webRTCData.role,pureAudioPushMod:o.webRTCData.pureAudioPushMod,recordId:o.webRTCData.recordId},e,n),s.initRTC(0,(new Date).getTime()-u,{extra_info:JSON.stringify(c),version:WebRTCAPI.fn.version()})},function(t){i.fire(this,r.EVENT.WEBRTC.INIT_ERROR,t),s.initRTC(1,(new Date).getTime()-u,{action_info:JSON.stringify(t),version:WebRTCAPI.fn.version()})}),this.initEvent(),this.RTC}},initEvent:function(){var t=this;this.RTC.on("onLocalStreamAdd",function(e){e&&e.stream&&i.fire(t,r.EVENT.WEBRTC.LOCAL_STREAM_ADD,e),s.reportWebRTCLog("webrtc_local_stream_add",0,{extra_info:JSON.stringify(e)})}),this.RTC.on("onRemoteStreamUpdate",function(e){e&&e.stream&&i.fire(t,r.EVENT.WEBRTC.REMOTE_STREAM_UPDATE,e),s.reportWebRTCLog("webrtc_remote_stream_update",0,{extra_info:JSON.stringify(e)})}),this.RTC.on("onRemoteStreamRemove",function(e){i.fire(t,r.EVENT.WEBRTC.REMOTE_STREAM_REMOVE,e),s.reportWebRTCLog("webrtc_remote_stream_remove",0,{extra_info:JSON.stringify(e)})}),this.RTC.on("onWebSocketClose",function(e){i.fire(t,r.EVENT.WEBRTC.WEBSOCKET_CLOSE,e),s.reportWebRTCLog("webrtc_websocket_close",0,{extra_info:JSON.stringify(e)})}),this.RTC.on("onRelayTimeout",function(e){i.fire(t,r.EVENT.WEBRTC.RELAY_TIME_OUT,e),s.reportWebRTCLog("webrtc_relay_timeout",0,{extra_info:JSON.stringify(e)})}),this.RTC.on("onKickout",function(e){i.fire(t,r.EVENT.WEBRTC.KICK_OUT,e),s.reportWebRTCLog("webrtc_kick_out",0,{extra_info:JSON.stringify(e)})}),this.RTC.on("onStreamNotify",function(e){i.fire(t,r.EVENT.WEBRTC.STREAM_NOTIFY,e),s.reportWebRTCLog("webrtc_stream_notify",0,{extra_info:JSON.stringify(e)})}),this.RTC.on("onErrorNotify",function(e){i.fire(t,r.EVENT.WEBRTC.ERROR_NOTIFY,e),s.reportWebRTCLog("webrtc_error_notify",0,{extra_info:JSON.stringify(e)})}),this.RTC.on("onWebSocketNotify",function(e){i.fire(t,r.EVENT.WEBRTC.WEBSOCKET_NOTIFY,e),s.reportWebRTCLog("webrtc_websocket_notify",0,{extra_info:JSON.stringify(e)})}),this.RTC.on("onPeerConnectionAdd",function(e){i.fire(t,r.EVENT.WEBRTC.PEER_CONNECTION_ADD,e),s.reportWebRTCLog("webrtc_peer_connection_add",0,{extra_info:JSON.stringify(e)})})}}},function(t,e,n){"use strict";var i=n(0),o=n(14),r=n(22),s=n(5);function a(t){var e=new r(t),n=o(r.prototype.request,e);return i.extend(n,r.prototype,e),i.extend(n,e),n}var c=a(s);c.Axios=r,c.create=function(t){return a(i.merge(s,t))},c.Cancel=n(11),c.CancelToken=n(21),c.isCancel=n(12),c.all=function(t){return Promise.all(t)},c.spread=n(36),t.exports=c,t.exports.default=c},function(t,e,n){"use strict";var i=n(11);function o(t){if("function"!=typeof t)throw new TypeError("executor must be a function.");var e;this.promise=new Promise(function(t){e=t});var n=this;t(function(t){n.reason||(n.reason=new i(t),e(n.reason))})}o.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},o.source=function(){var t;return{token:new o(function(e){t=e}),cancel:t}},t.exports=o},function(t,e,n){"use strict";var i=n(5),o=n(0),r=n(23),s=n(24);function a(t){this.defaults=t,this.interceptors={request:new r,response:new r}}a.prototype.request=function(t){"string"==typeof t&&(t=o.merge({url:arguments[0]},arguments[1])),(t=o.merge(i,{method:"get"},this.defaults,t)).method=t.method.toLowerCase();var e=[s,void 0],n=Promise.resolve(t);for(this.interceptors.request.forEach(function(t){e.unshift(t.fulfilled,t.rejected)}),this.interceptors.response.forEach(function(t){e.push(t.fulfilled,t.rejected)});e.length;)n=n.then(e.shift(),e.shift());return n},o.forEach(["delete","get","head","options"],function(t){a.prototype[t]=function(e,n){return this.request(o.merge(n||{},{method:t,url:e}))}}),o.forEach(["post","put","patch"],function(t){a.prototype[t]=function(e,n,i){return this.request(o.merge(i||{},{method:t,url:e,data:n}))}}),t.exports=a},function(t,e,n){"use strict";var i=n(0);function o(){this.handlers=[]}o.prototype.use=function(t,e){return this.handlers.push({fulfilled:t,rejected:e}),this.handlers.length-1},o.prototype.eject=function(t){this.handlers[t]&&(this.handlers[t]=null)},o.prototype.forEach=function(t){i.forEach(this.handlers,function(e){null!==e&&t(e)})},t.exports=o},function(t,e,n){"use strict";var i=n(0),o=n(27),r=n(12),s=n(5),a=n(32),c=n(30);function u(t){t.cancelToken&&t.cancelToken.throwIfRequested()}t.exports=function(t){return u(t),t.baseURL&&!a(t.url)&&(t.url=c(t.baseURL,t.url)),t.headers=t.headers||{},t.data=o(t.data,t.headers,t.transformRequest),t.headers=i.merge(t.headers.common||{},t.headers[t.method]||{},t.headers||{}),i.forEach(["delete","get","head","post","put","patch","common"],function(e){delete t.headers[e]}),(t.adapter||s.adapter)(t).then(function(e){return u(t),e.data=o(e.data,e.headers,t.transformResponse),e},function(e){return r(e)||(u(t),e&&e.response&&(e.response.data=o(e.response.data,e.response.headers,t.transformResponse))),Promise.reject(e)})}},function(t,e,n){"use strict";t.exports=function(t,e,n,i,o){return t.config=e,n&&(t.code=n),t.request=i,t.response=o,t}},function(t,e,n){"use strict";var i=n(13);t.exports=function(t,e,n){var o=n.config.validateStatus;n.status&&o&&!o(n.status)?e(i("Request failed with status code "+n.status,n.config,null,n.request,n)):t(n)}},function(t,e,n){"use strict";var i=n(0);t.exports=function(t,e,n){return i.forEach(n,function(n){t=n(t,e)}),t}},function(t,e,n){"use strict";var i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function o(){this.message="String contains an invalid character"}o.prototype=new Error,o.prototype.code=5,o.prototype.name="InvalidCharacterError",t.exports=function(t){for(var e,n,r=String(t),s="",a=0,c=i;r.charAt(0|a)||(c="=",a%1);s+=c.charAt(63&e>>8-a%1*8)){if((n=r.charCodeAt(a+=.75))>255)throw new o;e=e<<8|n}return s}},function(t,e,n){"use strict";var i=n(0);function o(t){return encodeURIComponent(t).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}t.exports=function(t,e,n){if(!e)return t;var r;if(n)r=n(e);else if(i.isURLSearchParams(e))r=e.toString();else{var s=[];i.forEach(e,function(t,e){null!==t&&void 0!==t&&(i.isArray(t)?e+="[]":t=[t],i.forEach(t,function(t){i.isDate(t)?t=t.toISOString():i.isObject(t)&&(t=JSON.stringify(t)),s.push(o(e)+"="+o(t))}))}),r=s.join("&")}return r&&(t+=(-1===t.indexOf("?")?"?":"&")+r),t}},function(t,e,n){"use strict";t.exports=function(t,e){return e?t.replace(/\/+$/,"")+"/"+e.replace(/^\/+/,""):t}},function(t,e,n){"use strict";var i=n(0);t.exports=i.isStandardBrowserEnv()?{write:function(t,e,n,o,r,s){var a=[];a.push(t+"="+encodeURIComponent(e)),i.isNumber(n)&&a.push("expires="+new Date(n).toGMTString()),i.isString(o)&&a.push("path="+o),i.isString(r)&&a.push("domain="+r),!0===s&&a.push("secure"),document.cookie=a.join("; ")},read:function(t){var e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove:function(t){this.write(t,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}}},function(t,e,n){"use strict";t.exports=function(t){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(t)}},function(t,e,n){"use strict";var i=n(0);t.exports=i.isStandardBrowserEnv()?function(){var t,e=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");function o(t){var i=t;return e&&(n.setAttribute("href",i),i=n.href),n.setAttribute("href",i),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:"/"===n.pathname.charAt(0)?n.pathname:"/"+n.pathname}}return t=o(window.location.href),function(e){var n=i.isString(e)?o(e):e;return n.protocol===t.protocol&&n.host===t.host}}():function(){return!0}},function(t,e,n){"use strict";var i=n(0);t.exports=function(t,e){i.forEach(t,function(n,i){i!==e&&i.toUpperCase()===e.toUpperCase()&&(t[e]=n,delete t[i])})}},function(t,e,n){"use strict";var i=n(0),o=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];t.exports=function(t){var e,n,r,s={};return t?(i.forEach(t.split("\n"),function(t){if(r=t.indexOf(":"),e=i.trim(t.substr(0,r)).toLowerCase(),n=i.trim(t.substr(r+1)),e){if(s[e]&&o.indexOf(e)>=0)return;s[e]="set-cookie"===e?(s[e]?s[e]:[]).concat([n]):s[e]?s[e]+", "+n:n}}),s):s}},function(t,e,n){"use strict";t.exports=function(t){return function(e){return t.apply(null,e)}}},function(t,e,n){"use strict";var i=n(2),o=n(1),r=(n(17),n(3)),s=n(8),a=n(7),c=n(18),u=n(19),f=n(4);n(6);function d(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};o.init(),r.off(),o.setDebug(t.debug)}d.VERSION=o.VERSION,d.CONSTANT=i,d.prototype={init:function(){this.initEvent(),f.initSdk()},initEvent:function(){this.on(i.EVENT.IM.KICKED,function(){try{u&&u.quit()}catch(t){}})},login:function(t){var e=this;o.setAuthData(t);var n=(new Date).getTime();return s.login().then(function(t){f.imLogin(0,(new Date).getTime()-n),r.fire(e,i.EVENT.IM.LOGIN_SUCC,t),s.setProfilePortrait()}).catch(function(t){f.imLogin(t.ErrorCode,(new Date).getTime()-n,{action_info:t.ErrorInfo}),r.fire(e,i.EVENT.IM.LOGIN_ERROR,t)}),webim},on:function(t,e){r.on(t,e)},off:function(t,e){r.off(t,e)},getBoardInstance:function(){return a.getInstance()},getImInstance:function(){return webim},getCosInstance:function(){return this.getBoardInstance().getCosInstance()},getWebRTCInstance:function(){return u.getInstance()},createClassroom:function(t){var e=this;o.setClassRoomData(t);var n=(new Date).getTime();s.createRoom().then(function(t){f.createClassroom(0,(new Date).getTime()-n),r.fire(e,i.EVENT.TIC.CREATE_CLASS_ROOM_SUCC,t)}).catch(function(t){f.createClassroom(t.ErrorCode,(new Date).getTime()-n,{action_info:t.ErrorInfo}),r.fire(e,i.EVENT.TIC.CREATE_CLASS_ROOM_ERROR,t)})},joinClassroom:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o.classRoomData.roomID,e=arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},s=this,a=arguments[3];arguments.length>4&&void 0!==arguments[4]&&arguments[4];t?o.updateRoomID(t):r.fire(this,i.EVENT.TIC.ROOMID_NOT_FOUND),o.setWebRTCData(e),o.setCosData(a),n.cosData=o.cosData,o.setBoardData(n);var c=(new Date).getTime();u.joinAvRoom(function(){s.webImJoinGroup(c)},function(t){r.fire(s,i.EVENT.TIC.JOIN_CLASS_ROOM_ERROR,{ErrorCode:t.errorCode,ErrorInfo:t.errorMsg})})},webImJoinGroup:function(t){var e=this;s.joinRoom().then(function(n){f.joinClassroom(0,(new Date).getTime()-t),a.renderView(),c.initEvent(),r.fire(e,i.EVENT.TIC.JOIN_CLASS_ROOM_SUCC,n)}).catch(function(n){f.joinClassroom(n.ErrorCode,(new Date).getTime()-t,{action_info:n.ErrorInfo}),r.fire(e,i.EVENT.TIC.JOIN_CLASS_ROOM_ERROR,n)})},quitClassroom:function(){var t=this,e=(new Date).getTime();s.quitGroup().then(function(){u.quit(),a.quit(),r.fire(t,i.EVENT.TIC.QUIT_CLASS_ROOM_SUCC),f.exitClassroom(0,(new Date).getTime()-e),o.resetData()}).catch(function(n){10010===n.ErrorCode||10007===n.ErrorCode||10015===n.ErrorCode?(u.quit(),a.quit(),r.fire(t,i.EVENT.TIC.QUIT_CLASS_ROOM_SUCC),f.exitClassroom(0,(new Date).getTime()-e)):(r.fire(t,i.EVENT.TIC.QUIT_CLASS_ROOM_ERROR,n),f.exitClassroom(n.ErrorCode,(new Date).getTime()-e,{action_info:n.ErrorInfo}))})},destroyClassRoom:function(){var t=this,e=(new Date).getTime();s.destroyGroup().then(function(n){u.quit(),a.clearAll(),a.quit(),r.fire(t,i.EVENT.TIC.DESTROY_CLASS_ROOM_SUCC),f.destroyClassroom(0,(new Date).getTime()-e),o.resetData()}).catch(function(e){r.fire(t,i.EVENT.TIC.DESTROY_CLASS_ROOM_ERROR,e)})},getCameraDevices:function(t){u.getInstance().getVideoDevices(t)},getMicDevices:function(t){u.getInstance().getAudioDevices(t)},startRTC:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=this,n=arguments[1],i=arguments[2];u.getInstance().startRTC(t,function(t){n&&n.apply(e,[t]),f.reportWebRTCLog("start_rtc",0,{extra_info:JSON.stringify(t)})},function(t){i&&i.apply(e,[t]),f.reportWebRTCLog("start_rtc",-1,{extra_info:JSON.stringify(t)})})},enableCamera:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];try{t?u.getInstance().openVideo():u.getInstance().closeVideo(),t?f.openCamera(0):f.closeCamera(0)}catch(e){t?f.openCamera(1,0,{action_info:JSON.stringify(e)}):f.closeCamera(1,0,{action_info:JSON.stringify(e)})}},switchCamera:function(t){try{u.getInstance().chooseVideoDevice(t),f.switchCamera(0,0,{action_info:JSON.stringify(error),extra_info:JSON.stringify(t)})}catch(e){f.switchCamera(1,0,{action_info:JSON.stringify(e),extra_info:JSON.stringify(t)})}},enableMic:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];try{t?u.getInstance().openAudio():u.getInstance().closeAudio(),t?f.openMic(0):f.closeMic(0)}catch(e){t?f.openMic(1,0,{action_info:JSON.stringify(e)}):f.closeMic(1,0,{action_info:JSON.stringify(e)})}},switchMic:function(t){try{u.getInstance().chooseAudioDevice(t),f.switchMic(0,0,{action_info:JSON.stringify(error),extra_info:JSON.stringify(t)})}catch(e){f.switchMic(1,0,{action_info:JSON.stringify(e),extra_info:JSON.stringify(t)})}},sendC2CTextMessage:function(t,e){s.sendC2CTextMessage(t,e)},sendC2CCustomMessage:function(t,e){s.sendC2CCustomMessage(t,e)},sendGroupTextMessage:function(t){s.sendGroupTextMessage(t)},sendGroupCustomMessage:function(t){s.sendGroupCustomMessage(t)},sendTextMessage:function(t,e){e?s.sendC2CTextMessage(e,t):s.sendGroupTextMessage(t)},sendCustomTextMessage:function(t,e){e?s.sendC2CCustomMessage(e,t):s.sendGroupCustomMessage(t)},uploadFile:function(t,e,n){this.addFile(t,e,n)},addFile:function(t,e,n){a.getInstance().addFile(t,e,n)},addImgFile:function(t,e,n){a.getInstance().addImgFile(t,e,n)},uploadImg:function(t,e,n){this.addImgFile(t,e,n)},logout:function(){var t=this,e=(new Date).getTime();s.logout().then(function(n){f.imLogout(0,(new Date).getTime()-e),r.fire(t,i.EVENT.IM.LOGOUT_SUCC,n)}).catch(function(n){r.fire(t,i.EVENT.IM.LOGOUT_ERROR,n),f.imLogout(n.ErrorCode,(new Date).getTime()-e,{action_info:n.ErrorInfo})})},setTimeStampProxyHandler:function(t){this.timeStampProxyHandler=t}};t.exports=d},function(t,e,n){"use strict";var i=n(1);t.exports={TICSDK_SERVER_URL:"https://yun.tim.qq.com/v4/ilvb_edu",TEST_TICSDK_SERVER_URL:"https://test.tim.qq.com/v4/ilvb_test",getTICSDKSvrURL:function(t){var e=t.sdkAppId,n=t.identifier,o=t.userSig;return(i.debug?this.TEST_TICSDK_SERVER_URL:this.TICSDK_SERVER_URL)+"/ticsdk_server?sdkappid="+e+"&identifier="+n+"&usersig="+o+"&contenttype=json"},getWhiteboardSvrURL:function(t){var e=t.sdkAppId,n=t.identifier,o=t.userSig;return(i.debug?this.TEST_TICSDK_SERVER_URL:this.TICSDK_SERVER_URL)+"/whiteboard?sdkappid="+e+"&identifier="+n+"&usersig="+o+"&contenttype=json"}}},function(t,e,n){"use strict";var i=n(2),o=n(3),r=n(1);t.exports={onConnNotify:function(t){o.fire(this,i.EVENT.IM.CONNECTION_EVENT,t)},onBigGroupMsgNotify:function(t){var e=this;t.length&&(t.forEach(function(t){var n=t.getSession();"GROUP"===n.type()&&(n.id()==r.classRoomData.chatgroup&&o.fire(e,i.EVENT.IM.RECEIVE_CHAT_ROOM_MSG,t))}),o.fire(this,i.EVENT.IM.BIG_GROUP_MSG_NOTIFY,t))},onMsgNotify:function(t){var e=this;if(t.length){t.forEach(function(t){var n=t.getSession();if("GROUP"===n.type()){if(n.id()==r.classRoomData.roomID){var s=t.elems;if(s.length){if("TIMCustomElem"===s[0].type&&"TXConferenceExt"===s[0].content.ext)return;"TIMCustomElem"===s[0].type&&"TXWhiteBoardExt"===s[0].content.ext?o.fire(e,i.EVENT.IM.RECEIVE_BOARD_ROOM_MSG,t):"TIMFileElem"===s[0].type&&"TXWhiteBoardExt"===s[0].content.name?o.fire(e,i.EVENT.IM.RECEIVE_BOARD_ROOM_MSG,t):o.fire(e,i.EVENT.IM.RECEIVE_CHAT_ROOM_MSG,t)}}}else o.fire(e,i.EVENT.IM.RECEIVE_C2C_MSG,t)}),o.fire(this,i.EVENT.IM.MSG_NOTIFY,t)}},onGroupSystemNotifys:{1:function(t){o.fire(void 0,i.EVENT.IM.GROUP_SYSTEM_NOTIFYS,{event_type:1,notify:t})},2:function(t){console.log("onGroupSystemNotifys   222"),o.fire(void 0,i.EVENT.IM.GROUP_SYSTEM_NOTIFYS,{event_type:2,notify:t})},3:function(t){console.log("onGroupSystemNotifys   333"),o.fire(void 0,i.EVENT.IM.GROUP_SYSTEM_NOTIFYS,{event_type:3,notify:t})},4:function(t){o.fire(void 0,i.EVENT.IM.GROUP_SYSTEM_NOTIFYS,{event_type:4,notify:t})},5:function(t){o.fire(void 0,i.EVENT.IM.GROUP_SYSTEM_NOTIFYS,{event_type:5,notify:t})},6:function(t){o.fire(void 0,i.EVENT.IM.GROUP_SYSTEM_NOTIFYS,{event_type:6,notify:t})},7:function(t){o.fire(void 0,i.EVENT.IM.GROUP_SYSTEM_NOTIFYS,{event_type:7,notify:t})},8:function(t){o.fire(void 0,i.EVENT.IM.GROUP_SYSTEM_NOTIFYS,{event_type:8,notify:t})},9:function(t){o.fire(void 0,i.EVENT.IM.GROUP_SYSTEM_NOTIFYS,{event_type:9,notify:t})},10:function(t){o.fire(void 0,i.EVENT.IM.GROUP_SYSTEM_NOTIFYS,{event_type:10,notify:t})},11:function(t){o.fire(void 0,i.EVENT.IM.GROUP_SYSTEM_NOTIFYS,{event_type:11,notify:t})},255:function(t){o.fire(void 0,i.EVENT.IM.GROUP_SYSTEM_NOTIFYS,{event_type:255,notify:t})}},onGroupInfoChangeNotify:function(t){o.fire(this,i.EVENT.IM.GROUP_INFO_CHANGE_NOTIFY,t)},onKickedEventCall:function(){o.fire(this,i.EVENT.IM.KICKED)},onFriendSystemNotifys:{1:function(t){o.fire(void 0,i.EVENT.IM.FRIEND_SYSTEM_NOTIFYS,{event_type:1,notify:t})},2:function(t){o.fire(void 0,i.EVENT.IM.FRIEND_SYSTEM_NOTIFYS,{event_type:2,notify:t})},3:function(t){o.fire(void 0,i.EVENT.IM.FRIEND_SYSTEM_NOTIFYS,{event_type:3,notify:t})},4:function(t){o.fire(void 0,i.EVENT.IM.FRIEND_SYSTEM_NOTIFYS,{event_type:4,notify:t})},5:function(t){o.fire(void 0,i.EVENT.IM.FRIEND_SYSTEM_NOTIFYS,{event_type:5,notify:t})},6:function(t){o.fire(void 0,i.EVENT.IM.FRIEND_SYSTEM_NOTIFYS,{event_type:6,notify:t})}},onProfileSystemNotifys:{1:function(t){o.fire(void 0,i.EVENT.IM.PROFILE_SYSTEM_NOTIFYS,{event_type:1,notify:t})}},onC2cEventNotifys:{92:function(t){o.fire(void 0,i.EVENT.IM.C2C_EVENT_NOTIFYS,{event_type:92,notify:t})},96:function(t){o.fire(void 0,i.EVENT.IM.KICKED)}}}},function(t,e){function n(t){return!!t.constructor&&"function"==typeof t.constructor.isBuffer&&t.constructor.isBuffer(t)}
    /*!
     * Determine if an object is a Buffer
     *
     * @author   Feross Aboukhadijeh <https://feross.org>
     * @license  MIT
     */
    t.exports=function(t){return null!=t&&(n(t)||function(t){return"function"==typeof t.readFloatLE&&"function"==typeof t.slice&&n(t.slice(0,0))}(t)||!!t._isBuffer)}}])});
